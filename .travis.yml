# The language in this case has no bearing - we are going to be making use of conda.
language: objective-c

sudo: false

env:
    global:
        # Add the BINSTAR_TOKEN environment variable. This has been generated with 
        # 'anaconda auth --create --name JascRecipesTravis --scopes "repos conda api"' 
        # then "travis encrypt BINSTAR_TOKEN=<token_id>"
        secure: "SNeSk+B26Y6zrbVBamJCgtC0Nv3nUka0VVLdyOYjBwmIiI65asV6MXwp/S+OW8xgl2/8JWfqr9V4XntdtUmQ5mls4ostco791mojeFLKsER00UrEn/c9uGZWWxeczwCnKAQ4nzRIivQv/3JuosMBhtLLTUGWgVdS/6sRk3jdFmN4jXbv8Nq/fTYv0My4FEfA6Q6xn1BzjI8Z3xI8OyVIC3tXQTu2VQLjyocZ67QmGeb/f1KxmqmPWmmnr8qIEIL+VSUdDU/PzK1i83agLqVeSK5j5a8/gBsrKWnz80WU7/fWR3GIqnvjBYFfSmDLBGz5UW/W5D52NqYwcjZuyQu7QRhodx/ht/RwWTV6K8lWC5/r30dQ/9Rl682UXBgt8v3SqE2AxN3iuHdUJi+OBnKVm+nvSYq9kUxuOKPBYvdgz8PPwRlScYkdwJX3noGlXuHbEY70xfrNVuNRXF7SFzT4F5zMFJZr2GDzFBEJFpnu5VXKYQxcFqTDv59ZAG0pki0TgHWE6hSNA1N1T5WDZS7mv6LUOPWbazp4004oKr00KHMP6un5HknvRJ4KWzHnTaV7LnB/XSDwFK9M99ukLbX4vnmCs9imUdpTmvortJk470Grlv38WAkg2uYn4K3bmASOIj4p/3WQ8wZfCwrOn52D6akLUHgp1qF23nEQwBeH90c="
        # PYPI_USER
        secure: "b'QY7FBBJ8AKohcghhb6g37Tug5lEzVtISf9VY3ssybCP1iR2fS78af8QvF5GPPiWUK7mO4xraWPARjQD3kOyIkVVdaSXSTT6c9clB75MN5qd+nAPlyu/HxaUnn5B8/i+OGmn1TViqowFqgtcn7aTVqRly6blH38Ff6UB0+DQeDKTVMId2i9SoyAh8s2F9YKf42TNsVKSSDYtr82mCmZ8aMlFvM9lXQbr1aJwG8gOLop5E7AD9rFlnK7ve4boXU0ItfD7VDnRJO/ekQBUiTcy6G6Z+9ZAaXeYi/Zq6Aumws55W7H9SYFKASB8cz5ozk+KaVjQ3IB8ap/cfUEJSCrNPKXwQuHnmv17xw5sOndZc7J2Pp0uGUvgA1jeGUMSfmEsYnNLmUxQM5lYyz2Wz3qkwvw4PyYncEQeMrXIhLekjjTOI0y5k3ICDQnNP2k6/FWiPXo7h0IuvsMl4JwwfhCOPQD89RCKn1iv1Z5b1Hp+qb9Qu05Ot7rqgMRyfn87NFSbYIlcqX3O6vAu6zgp8im5kz/mmyhXaM3W+GvlqNRsGrCUJUuaShDhva/Zu8DTs/B/qqKwGltvnp4iCy+3SbkDqFCg3UZ27lgaaJlVogue0zrMBQps+0JtrnrIqWGtckojQQs8DBIGk05hKXpileSHtMNDFmYGLGl+B7rZSzw6cpA8='"
        #PYPI_PASS
        secure: "b'ZVq/UqkUJUZQ3xJ9XOAgD+B8IcYmaN9vUfWb82YT8ONkscYgY14oyeONNZewVZwsT9tONv5graP7IzXFCN6xOO4t/lA5ANChY+p7FnzEeMMTcGXPFfyZLl32TkBGJChIU/jblKM3cvqSUVHgebPadzIzwBZKR/earTH8akXkqbhCCBeH9A9Wg8LsNforiR2CAQKuJGETiQzjuNTkMcObfUNAQzUUYzkRaOUnLX0WbM1XT7przifPZ4sqNYTjTOLRS5le7/lL4wJcixYpI+a012DFzsWeuS/QT7Lax29pvqOs6W7fVk1gtt5GO0fG9XMz928bpeb+FxSNGKORBVMXtGowBdYAQkQ3fX+rbKKMMfCl2/iUcOK9TKNvSmP6wixkmNKP1+CRsareLrVNvf1M4rmPcFx3yd9ys88o4PTFLeSbkV2CY3Oyjzh068waQzHl3S15OxpJTecYpL/68g9cj9DDROkYfGaOYqOz7FJ1FJB9rLT0b/xm4HiquVUa3qbYzbMVhGBcMkpHbNFLSxa1/gj1swcAwuroB0B5VjmUDo+IPtxSdGDiibNzpyGeiOROZMKusxVz4dzNGuottMqtg5ByT08imGHvz5MFgPww7GwtVXdj25R/uuakWDm1B94UD+1tjcwRnYmE84UvuXs2pauVPsH4F5bIE4RHNoRaB/o='"
addons:
    apt:
        packages:
            # Install makeinfo [sic] - needed for constructing configuration
            # files via autoreconf (in particular for udunits)
            - texinfo

            # Unit testing framework for C (used by libmo_unpack)
            - check

before_install:
    - brew update && brew install check

install:
    - wget https://raw.githubusercontent.com/pelson/Obvious-CI/master/bootstrap-obvious-ci-and-miniconda.py
    - python bootstrap-obvious-ci-and-miniconda.py ~/miniconda x64 2 --without-obvci && source ~/miniconda/bin/activate root
    - conda config --set show_channel_urls True
    - conda install -c http://conda.binstar.org/pelson/channel/development --yes --quiet obvious-ci
    - conda config --add channels janschulz
    - conda config --set show_channel_urls yes
    - conda info
    - obvci_install_conda_build_tools.py
    - pip install twine

script:
    - obvci_conda_build_dir.py ./recipes janschulz --channel main --build-condition "numpy >=1.8" "python >=2.7,<3|>=3.4,<3.5"

